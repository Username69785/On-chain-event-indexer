# Database Schema Overview

## Table: token_transfers (recommended)

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è


| Column            | Type          | Not Null | Default               | –ó–∞—á–µ–º                                                                                                                            | Status                                |
| ------------------- | --------------- | ---------- | ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------- |
| `id`              | uuid          | ‚úÖ       | ~~gen_random_uuid()~~ | PK                                                                                                                                    |                                       |
| `signature`       | text          | ‚úÖ       |                       | FK –Ω–∞`transactions.signature`                                                                                                       |                                       |
| `slot`            | int8          | ‚úÖ       |                       | –±—ã—Å—Ç—Ä–æ–µ –æ–∫–Ω–æ/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞                                                                                          |                                       |
| `block_time`      | int8          | ‚¨ú       |                       | –≤—Ä–µ–º—è –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–∏–ª–∏ –±–µ—Ä—ë—Ç—Å—è join'–æ–º –∏–∑ transactions)                                                | **üîÑ Changed: NOT NULL ‚Üí nullable**  |
| ~~owner_address~~ | ~~text~~      | ~~‚úÖ~~   |                       |                                                                                                                                       | **‚ùå Removed**                        |
| **tracked_owner** | **text**      | **‚¨ú**   |                       | **—Ç–≤–æ–π `owner_address`, –µ—Å–ª–∏ —ç—Ç–æ "—Ç—Ä–∞–Ω—Å—Ñ–µ—Ä, –æ—Ç–Ω–æ—Å—è—â–∏–π—Å—è –∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º–æ–º—É –∞–¥—Ä–µ—Å—É"** | **üÜï Added (replaces owner_address)** |
| **direction**     | **text/enum** | **‚¨ú**   |                       | **`in/out/self/unknown` –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `tracked_owner`**                                                                    | **üÜï Added**                          |

### –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∞—Å—Å–µ—Ç–∞


| Column            | Type          | Not Null | Default | –ó–∞—á–µ–º                                                                            | Status                               |
| ------------------- | --------------- | ---------- | --------- | --------------------------------------------------------------------------------------- | -------------------------------------- |
| **asset_type**    | **enum/text** | **‚úÖ**   |         | **`native` –∏–ª–∏ `spl`**                                                             | **üÜï Added**                         |
| `token_mint`      | text          | ‚úÖ ‚Üí ‚¨ú |         | mint —Ç–æ–∫–µ–Ω–∞**—Ç–æ–ª—å–∫–æ –¥–ª—è SPL**; –¥–ª—è SOL = NULL                       | **üîÑ Changed: NOT NULL ‚Üí nullable** |
| **token_program** | **text**      | **‚¨ú**   |         | **SPL Token vs Token-2022**                                                           | **üÜï Added**                         |
| `decimals`        | int4          | ‚úÖ ‚Üí ‚¨ú |         | –¥–ª—è SPL; –¥–ª—è SOL –º–æ–∂–Ω–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å 9 –∏–ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å NULL | **üîÑ Changed: NOT NULL ‚Üí nullable** |

### –û—Ç–∫—É–¥–∞ ‚Üí –∫—É–¥–∞ (–≤–∞–∂–Ω–æ!)


| Column                        | Type     | Not Null | Default | –ó–∞—á–µ–º                                                       | Status                                                         |
| ------------------------------- | ---------- | ---------- | --------- | ------------------------------------------------------------------ | ---------------------------------------------------------------- |
| **source_owner**              | **text** | **‚¨ú**   |         | **–≤–ª–∞–¥–µ–ª–µ—Ü (–∫–æ—à–µ–ª—ë–∫) –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è**     | **üÜï Added**                                                   |
| **destination_owner**         | **text** | **‚¨ú**   |         | **–≤–ª–∞–¥–µ–ª–µ—Ü –ø–æ–ª—É—á–∞—Ç–µ–ª—è**                        | **üÜï Added**                                                   |
| **source_token_account**      | **text** | **‚¨ú**   |         | **–¥–ª—è SPL: —Ç–æ–∫–µ–Ω-–∞–∫–∫–∞—É–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è** | **üÜï Added**                                                   |
| **destination_token_account** | **text** | **‚¨ú**   |         | **–¥–ª—è SPL: —Ç–æ–∫–µ–Ω-–∞–∫–∫–∞—É–Ω—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è**   | **üÜï Added**                                                   |
| ~~source_address~~            | ~~text~~ | ~~‚úÖ~~   |         |                                                                  | **‚ùå Removed (replaced by source_owner/source_token_account)** |

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è SOL –æ–±—ã—á–Ω–æ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è `source_owner/destination_owner`, –∞ token_account –ø–æ–ª—è –±—É–¥—É—Ç NULL.
> –î–ª—è SPL –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω—è—Ç—å –∏ token_account, –∏ owners (–µ—Å–ª–∏ owners –∏–∑–≤–µ—Å—Ç–Ω—ã).

### –°—É–º–º–∞ –∏ —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏


| Column            | Type                   | Not Null | Default | –ó–∞—á–µ–º                                                 | Status                                  |
| ------------------- | ------------------------ | ---------- | --------- | ------------------------------------------------------------ | ----------------------------------------- |
| **amount_raw**    | **numeric(40) / int8** | **‚úÖ**   |         | **–≤ base units, –≤—Å–µ–≥–¥–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ** | **üÜï Added (replaces amount_change)**   |
| **amount_ui**     | **numeric**            | **‚¨ú**   |         | **—É–¥–æ–±–Ω–æ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤**                   | **üÜï Added**                            |
| ~~amount_change~~ | ~~numeric(40)~~        | ~~‚úÖ~~   |         |                                                            | **‚ùå Removed (replaced by amount_raw)** |
| **transfer_type** | **enum/text**          | **‚úÖ**   |         | **`transfer/mint/burn/unknown`**                           | **üÜï Added**                            |

### –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –º–µ—Å—Ç—É –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ)


| Column              | Type     | Not Null | Default | –ó–∞—á–µ–º                                                           | Status       |
| --------------------- | ---------- | ---------- | --------- | ---------------------------------------------------------------------- | -------------- |
| **instruction_idx** | **int4** | **‚¨ú**   |         | **–∏–Ω–¥–µ–∫—Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**                                | **üÜï Added** |
| **inner_idx**       | **int4** | **‚¨ú**   |         | **–∏–Ω–¥–µ–∫—Å inner (–µ—Å–ª–∏ CPI)**                                | **üÜï Added** |
| **authority**       | **text** | **‚¨ú**   |         | **–∫—Ç–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–ª (—á–∞—Å—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è SPL)** | **üÜï Added** |

### –¢–µ—Ö–ø–æ–ª—è


| Column       | Type        | Not Null | Default | –ó–∞—á–µ–º                | Status |
| -------------- | ------------- | ---------- | --------- | --------------------------- | -------- |
| `created_at` | timestamptz | ‚¨ú       | now()   | –∞—É–¥–∏—Ç/–æ—Ç–ª–∞–¥–∫–∞ |        |

---

## Table: transactions // ‚úÖ


| #  | Column Name          | Data Type | Not Null | Default | Status       |
| ---- | ---------------------- | ----------- | ---------- | --------- | -------------- |
| 1  | owner_address        | text      | [v]      |         |              |
| 2  | signature            | text      | [v]      |         |              |
| 3  | slot                 | int8      | [v]      |         |              |
| 4  | block_time           | int8      | [v]      |         |              |
| 6  | fee                  | int8      | [v]      |         |              |
| 7  | compute_units        | int4      | [ ]      |         |              |
| 8  | err                  | jsonb     | [ ]      |         |              |
| 9  | **num_signers**      | **int4**  | **[ ]**  |         | **üÜï Added** |
| 10 | **num_instructions** | **int4**  | **[ ]**  |         | **üÜï Added** |

---

## Table: signatures // ‚úÖ

### ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–æ–ª–µ–∑–Ω–∞—è —Å—Ö–µ–º–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∏–Ω–∏–º—É–º)


| # | Column Name             | Data Type     | Not Null | Default   | Status                                |
| --- | ------------------------- | --------------- | ---------- | ----------- | --------------------------------------- |
| 7 | **signature**           | text          | [v]      |           | **‚úÖ PK/UNIQUE**                      |
| 2 | **owner_address**       | text          | [v]      |           | **‚úÖ Keep**                           |
| 1 | **block_time**          | int8          | [v]      |           | **‚úÖ Keep**                           |
| 8 | **is_processed**        | bool          | [ ]      | false     | **‚úÖ Keep** (queued/processed/failed) |
| 3 | ~~slot~~                | ~~int8~~      | ~~[v]~~  |           | ‚ùå Not essential                      |
| 4 | ~~confirmation_status~~ | ~~text~~      | ~~[ ]~~  |           | ‚ùå Not essential                      |
| 5 | ~~err~~                 | ~~jsonb~~     | ~~[ ]~~  |           | ‚ùå Not essential                      |
| 6 | ~~created_at~~          | ~~timestamp~~ | ~~[ ]~~  | ~~now()~~ | ‚ùå Not essential                      |
